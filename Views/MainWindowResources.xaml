<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:vm="clr-namespace:Medical.ViewModels"
                    xmlns:vw="clr-namespace:Medical.Views"
                    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
                    xmlns:materialIcons="clr-namespace:Material.Icons.WPF;assembly=Material.Icons.WPF">

    <!-- ==================== DATA TEMPLATES ==================== -->
    <!-- These templates link ViewModels to their corresponding Views -->

    <!-- Pacjent (Patient) Templates -->
    <DataTemplate DataType="{x:Type vm:WszyscyPacjenciViewModel}">
        <vw:WszyscyPacjenciView/>
    </DataTemplate>

    <DataTemplate DataType="{x:Type vm:NowyPacjentViewModel}">
        <vw:NowyPacjentView/>
    </DataTemplate>

    <!-- Additional entity templates will be added here as needed -->


    <!-- ==================== STYLES ==================== -->

    <!-- Main HeaderedContentControl Style -->
    <Style x:Key="MainHCCStyle" TargetType="{x:Type HeaderedContentControl}">
        <Setter Property="HeaderTemplate">
            <Setter.Value>
                <DataTemplate>
                    <Border
                        Background="{DynamicResource MaterialDesignPaper}"
                        BorderBrush="{DynamicResource BorderDark}"
                        BorderThickness="0,0,0,2"
                        CornerRadius="0"
                        Margin="0"
                        Padding="16,12"
                        SnapsToDevicePixels="True">
                        <TextBlock
                            FontSize="16"
                            FontWeight="Medium"
                            Foreground="{DynamicResource MaterialDesignBody}"
                            Text="{TemplateBinding Content}"
                            VerticalAlignment="Center"/>
                    </Border>
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type HeaderedContentControl}">
                    <DockPanel>
                        <ContentPresenter
                            DockPanel.Dock="Top"
                            ContentSource="Header"
                            ContentTemplate="{TemplateBinding HeaderTemplate}" />
                        <ContentPresenter
                            ContentSource="Content"
                            ContentTemplate="{TemplateBinding ContentTemplate}" />
                    </DockPanel>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Main Border Style -->
    <Style x:Key="MainBorderStyle" TargetType="{x:Type Border}">
        <Setter Property="Background" Value="{DynamicResource DarkSurface}" />
        <Setter Property="BorderBrush" Value="{DynamicResource BorderDark}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="CornerRadius" Value="4" />
        <Setter Property="SnapsToDevicePixels" Value="True" />
    </Style>

    <!-- Commands Template (Sidebar Navigation) -->
    <DataTemplate x:Key="CommandsTemplate">
        <ItemsControl ItemsSource="{Binding}" Margin="0">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Button
                        Command="{Binding Command}"
                        Content="{Binding DisplayName}"
                        Margin="4,2"
                        Padding="16,12"
                        HorizontalContentAlignment="Left"
                        Style="{StaticResource MaterialDesignFlatButton}"
                        Foreground="{DynamicResource MaterialDesignBody}"
                        FontSize="14"
                        FontWeight="Normal">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="4"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </DataTemplate>

    <!-- Closable Tab Item Template -->
    <DataTemplate x:Key="ClosableTabItemTemplate">
        <DockPanel MinWidth="120" Background="Transparent">
            <Button
                Command="{Binding Path=CloseCommand}"
                DockPanel.Dock="Right"
                Margin="8,0,0,0"
                Padding="0"
                Width="20"
                Height="20"
                Style="{StaticResource MaterialDesignToolButton}"
                ToolTip="Zamknij zakładkę">
                <materialIcons:MaterialIcon
                    Kind="Close"
                    Width="16"
                    Height="16"/>
            </Button>
            <TextBlock
                Text="{Binding Path=DisplayName}"
                VerticalAlignment="Center"
                Margin="8,0,0,0"
                FontSize="13"
                FontWeight="Normal"
                Foreground="{DynamicResource MaterialDesignBody}"/>
        </DockPanel>
    </DataTemplate>

    <!-- Workspaces Template (Tab Control) -->
    <DataTemplate x:Key="WorkspacesTemplate">
        <TabControl
            IsSynchronizedWithCurrentItem="True"
            ItemsSource="{Binding}"
            ItemTemplate="{StaticResource ClosableTabItemTemplate}"
            Margin="0"
            Background="{DynamicResource MaterialDesignPaper}"
            Style="{StaticResource MaterialDesignTabControl}">
        </TabControl>
    </DataTemplate>

</ResourceDictionary>
