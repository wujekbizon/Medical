<Window x:Class="Medical.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Medical.Views"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:materialIcons="clr-namespace:Material.Icons.WPF;assembly=Material.Icons.WPF"
        mc:Ignorable="d"
        Title="Medical - System Zarządzania Medycznego"
        Height="768"
        Width="1366"
        WindowStartupLocation="CenterScreen"
        Background="{DynamicResource MaterialDesignPaper}"
        FontFamily="{DynamicResource MaterialDesignFont}"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        TextElement.FontWeight="Regular"
        TextElement.FontSize="13"
        TextOptions.TextFormattingMode="Ideal"
        TextOptions.TextRenderingMode="Auto">

    <Window.Resources>
        <ResourceDictionary Source="MainWindowResources.xaml" />
    </Window.Resources>

    <materialDesign:DialogHost Identifier="RootDialog">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="240"/>
                <!-- Sidebar -->
                <ColumnDefinition Width="*"/>
                <!-- Main content -->
            </Grid.ColumnDefinitions>

            <!-- ==================== LEFT SIDEBAR ==================== -->
            <Border Grid.Column="0"
                    Background="{DynamicResource DarkSurface}"
                    BorderBrush="{DynamicResource BorderDark}"
                    BorderThickness="0,0,1,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <!-- Header -->
                        <RowDefinition Height="*"/>
                        <!-- Navigation -->
                        <RowDefinition Height="Auto"/>
                        <!-- Footer -->
                    </Grid.RowDefinitions>

                    <!-- Application Header -->
                    <Border Grid.Row="0"
                            Background="{DynamicResource DarkSurfaceVariant}"
                            BorderBrush="{DynamicResource BorderDark}"
                            BorderThickness="0,0,0,1"
                            Padding="16">
                        <StackPanel>
                            <materialIcons:MaterialIcon
                                Kind="HospitalBox"
                                Width="48"
                                Height="48"
                                HorizontalAlignment="Center"
                                Foreground="{DynamicResource AccentPurple}"/>
                            <TextBlock Text="Medical System"
                                       FontSize="18"
                                       FontWeight="Bold"
                                       HorizontalAlignment="Center"
                                       Margin="0,8,0,0"
                                       Foreground="{DynamicResource TextPrimary}"/>
                            <TextBlock Text="v1.0"
                                       FontSize="11"
                                       HorizontalAlignment="Center"
                                       Foreground="{DynamicResource TextSecondary}"/>
                        </StackPanel>
                    </Border>

                    <!-- Navigation Menu -->
                    <ScrollViewer Grid.Row="1"
                                  VerticalScrollBarVisibility="Auto"
                                  Padding="8">
                        <StackPanel>
                            <!-- Dashboard Section -->
                            <TextBlock Text="PULPIT"
                                       FontSize="11"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource TextSecondary}"
                                       Margin="12,12,0,8"/>

                            <!-- Separator -->
                            <Separator Background="{DynamicResource BorderDark}"
                                       Margin="8,12,8,12"/>

                            <!-- Entities Section -->
                            <TextBlock Text="OPERACJE"
                                       FontSize="11"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource TextSecondary}"
                                       Margin="12,8,0,8"/>

                            <!-- Commands List -->
                            <ContentControl
                                Content="{Binding Path=Commands}"
                                ContentTemplate="{StaticResource CommandsTemplate}"/>
                        </StackPanel>
                    </ScrollViewer>

                    <!-- Sidebar Footer -->
                    <Border Grid.Row="2"
                            Background="{DynamicResource DarkSurfaceVariant}"
                            BorderBrush="{DynamicResource BorderDark}"
                            BorderThickness="0,1,0,0"
                            Padding="12,8">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <materialIcons:MaterialIcon
                                Kind="Account"
                                Width="32"
                                Height="32"
                                Grid.Column="0"
                                VerticalAlignment="Center"
                                Foreground="{DynamicResource AccentBlue}"/>

                            <StackPanel Grid.Column="1"
                                        Margin="12,0,0,0"
                                        VerticalAlignment="Center">
                                <TextBlock Text="Grzegorz Wolfinger"
                                           FontSize="13"
                                           FontWeight="Medium"
                                           Foreground="{DynamicResource TextPrimary}"/>
                                <TextBlock Text="Wesa 2025"
                                           FontSize="11"
                                           Foreground="{DynamicResource TextSecondary}"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </Grid>
            </Border>

            <!-- ==================== MAIN CONTENT AREA ==================== -->
            <Grid Grid.Column="1"
                  Background="{DynamicResource DarkBackground}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <!-- Toolbar -->
                    <RowDefinition Height="*"/>
                    <!-- Workspace -->
                    <RowDefinition Height="Auto"/>
                    <!-- Status Bar -->
                </Grid.RowDefinitions>

                <!-- Top Toolbar -->
                <Border Grid.Row="0"
                        Background="{DynamicResource DarkSurface}"
                        BorderBrush="{DynamicResource BorderDark}"
                        BorderThickness="0,0,0,1"
                        Padding="16,8">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- Left side - breadcrumb/title -->
                        <StackPanel Grid.Column="0"
                                    Orientation="Horizontal"
                                    VerticalAlignment="Center">
                            <materialIcons:MaterialIcon
                                Kind="Home"
                                Width="20"
                                Height="20"
                                Margin="0,0,8,0"
                                VerticalAlignment="Center"/>
                            <TextBlock Text="Przestrzeń robocza"
                                       FontSize="16"
                                       FontWeight="Medium"
                                       VerticalAlignment="Center"
                                       Foreground="{DynamicResource TextPrimary}"/>
                        </StackPanel>

                        <!-- Right side - action buttons -->
                        <StackPanel Grid.Column="1"
                                    Orientation="Horizontal"
                                    VerticalAlignment="Center">
                            <Button Style="{StaticResource MaterialDesignToolButton}"
                                    ToolTip="Ustawienia"
                                    Margin="4,0">
                                <materialIcons:MaterialIcon Kind="Cog" Width="20" Height="20"/>
                            </Button>
                            <Button Style="{StaticResource MaterialDesignToolButton}"
                                    ToolTip="Powiadomienia"
                                    Margin="4,0">
                                <materialIcons:MaterialIcon Kind="Bell" Width="20" Height="20"/>
                            </Button>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Workspace Area (Tabs) -->
                <Border Grid.Row="1"
                        Margin="8"
                        Background="{DynamicResource DarkSurface}"
                        BorderBrush="{DynamicResource BorderDark}"
                        BorderThickness="1"
                        CornerRadius="4">
                    <ContentControl
                        Content="{Binding Path=Workspaces}"
                        ContentTemplate="{StaticResource WorkspacesTemplate}"
                        Margin="0"/>
                </Border>

                <!-- Status Bar -->
                <Border Grid.Row="2"
                        Background="{DynamicResource DarkSurface}"
                        BorderBrush="{DynamicResource BorderDark}"
                        BorderThickness="0,1,0,0"
                        Padding="16,6">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0"
                                    Orientation="Horizontal">
                            <materialIcons:MaterialIcon
                                Kind="CheckCircle"
                                Width="16"
                                Height="16"
                                Margin="0,0,8,0"
                                VerticalAlignment="Center"
                                Foreground="#4CAF50"/>
                            <TextBlock Text="Gotowy"
                                       FontSize="12"
                                       VerticalAlignment="Center"
                                       Foreground="{DynamicResource TextSecondary}"/>
                        </StackPanel>

                        <TextBlock Grid.Column="2"
                                   Text="{Binding Path=Workspaces.Count, StringFormat='Otwartych zakładek: {0}'}"
                                   FontSize="12"
                                   VerticalAlignment="Center"
                                   Foreground="{DynamicResource TextSecondary}"/>
                    </Grid>
                </Border>
            </Grid>
        </Grid>
    </materialDesign:DialogHost>
</Window>
